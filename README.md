# golang_integration

## Домашняя работа 1. Breakpoints и Простые алгоритмы на массивах

### Задание 1. Слияние отсортированных массивов

Напишите функцию, которая производит слияние двух отсортированных массивов длиной четыре и пять в один массив длиной девять.

### Задание 2. Сортировка пузырьком
Отсортируйте массив длиной шесть пузырьком.

## Домашняя работа 2. Работа с файлами

### Задание 1. Работа с файлами
-Напишите программу, которая на вход получала бы строку, введённую пользователем, а в файл писала № строки, дату и сообщение в формате:
2020-02-10 15:00:00 продам гараж.
-При вводе слова exit программа завершает работу.
### Задание 2. Интерфейс io.Reader
-Напишите программу, которая читает и выводит в консоль строки из файла, созданного в предыдущей практике, без использования ioutil. Если файл отсутствует или пуст, выведите в консоль соответствующее сообщение.

Рекомендация:

Для получения размера файла воспользуйтесь методом Stat(), который возвращает информацию о файле и ошибку.
### Задание 3. Уровни доступа
Напишите программу, создающую текстовый файл только для чтения, и проверьте, что в него нельзя записать данные.

Рекомендация:

Для проверки создайте файл, установите режим только для чтения, закройте его, а затем, открыв, попытайтесь прочесть из него данные.
### Задание 4. Пакет ioutil
Перепишите задачи 1 и 2, используя пакет ioutil.
### Задание 5 (по желанию). Комбинации круглых скобок
-Напишите программу, которая на вход принимала бы интовое число и для него генерировала бы все возможные комбинации круглых скобок.

Рекомендация:

-Первый пример вывода программы:
Введите количество пар скобок:
3
["((()))","(()())","(())()","()(())","()()()"]

-Второй пример вывода программы:
Введите количество пар скобок:
1
["()"]


## Домашняя работа 3. Многопоточность, работа с каналами
### Задание 1. Конвейер

- Реализуйте паттерн-конвейер:
Программа принимает числа из стандартного ввода в бесконечном цикле и передаёт число в горутину.
- Квадрат: горутина высчитывает квадрат этого числа и передаёт в следующую горутину.
- Произведение: следующая горутина умножает квадрат числа на 2.
- При вводе «стоп» выполнение программы останавливается.

### Задание 2. Graceful shutdown

- В работе часто возникает потребность правильно останавливать приложения. Например, когда наш сервер обслуживает соединения, а нам хочется, чтобы все текущие соединения были обработаны и лишь потом произошло выключение сервиса. Для этого существует паттерн graceful shutdown.
- Напишите приложение, которое выводит квадраты натуральных чисел на экран, а после получения сигнала ^С обрабатывает этот сигнал, пишет «выхожу из программы» и выходит.

## Домашняя работа 4

Напишите HTTP-сервис, который принимает входящие соединения с JSON-данными и обрабатывает их следующим образом: **

1. Сделайте обработчик создания пользователя. У пользователя должны быть следующие поля: имя, возраст и массив друзей.
Пользователя необходимо сохранять в мапу.

curl -X POST -d '{"name":"Ivan","age":24,"friends":[]}' http://localhost:8080/create

Данный запрос должен возвращать ID пользователя и статус 201.

2. Сделайте обработчик, который делает друзей из двух пользователей.
Например, если мы создали двух пользователей и нам вернулись их ID, то в запросе мы можем указать ID пользователя,
который инициировал запрос на дружбу, и ID пользователя, который примет инициатора в друзья.

curl -X POST -d '{"source_id":"1","target_id":"2"}' http://localhost:8080/make_friends

Данный запрос должен возвращать статус 200 и сообщение «username_1 и username_2 теперь друзья».

3. Сделайте обработчик, который удаляет пользователя. Данный обработчик принимает ID пользователя и удаляет его из хранилища, а также стирает его из массива friends у всех его друзей. 

curl -X DELETE -d http://localhost:8080/user/{id}

Данный запрос должен возвращать 200 и имя удалённого пользователя.

4. Сделайте обработчик, который возвращает всех друзей пользователя. 

curl -X GET -d http://localhost:8080/friends/{id}

После /friends/ указывается id пользователя, друзей которого мы хотим увидеть.

5. Сделайте обработчик, который обновляет возраст пользователя. 

curl -X PUT -d '{"new age":"28"}' http://localhost:8080/user/{id}


Запрос должен возвращать 200 и сообщение «возраст пользователя успешно обновлён».

### Советы и рекомендации

Воспользуйтесь библиотекой Chi.


## Домашняя раюота 5. Микросервисная архитектура
- В прошлом домашнем задании вы писали приложение, которое принимает HTTP-запросы, создаёт пользователей, добавляет друзей и так далее. Давайте теперь приблизим наше приложение к реальному продукту.
- Отрефакторьте приложение так, чтобы вы могли поднять две реплики данного приложения.
- Используйте любую базу данных, чтобы сохранять информацию о пользователях, или можете сохранять информацию в файл, предварительно сереализуя в JSON.
- Напишите proxy или используйте, например, nginx.
- Протестируйте приложение.